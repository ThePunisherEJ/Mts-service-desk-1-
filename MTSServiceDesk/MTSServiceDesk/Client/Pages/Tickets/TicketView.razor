@page "/TicketView/{ClientId:int}/{TicketId:int}"
@inherits TicketViewBase

<EditForm Model="TicketRequest" Context="EditForm">
    <DataAnnotationsValidator />

    <div class="mb-3 d-flex flex-row align-items-center">
        <label class="MTS-CSS-label-variant-02">Client ID </label> <br />
        <label class="MTS-CSS-label-variant-02">@ClientName</label>

        @*<InputSelect @bind-Value="SelectedClientId" class="form-control ml-3 w-25 MTS-CSS-dropDownList">

            @foreach (var client in clients)
            {
                <option value="@client.Id"> @client.Name</option>

            }
        </InputSelect>*@
    </div>
    <div class="mb-3 d-flex flex-row align-items-center">
        <label class="MTS-CSS-label-variant-02">System </label> <br />
        <label class="MTS-CSS-label-variant-02">@SystemName</label>
        @*<InputSelect @bind-Value="SelectedSystemID" class="form-control ml-3 w-25 MTS-CSS-dropDownList">

            @foreach (var sys in Systems)
            {
                <option value="@sys.Id"> @sys.Name</option>

            }
        </InputSelect>*@
    </div>

    &nbsp;

    <label class="MTS-CSS-label-variant-04">ID</label>  &nbsp;
    <label class="MTS-CSS-label-variant-04">@TicketRequest.Id</label>


    &nbsp;


    <label class="MTS-CSS-label-variant-04">Date Created</label> &nbsp;
    <InputDate @bind-Value="TicketRequest.DateCreated" class="MTS-CSS-dateSelector" />


    &nbsp; &nbsp;
    <br />
    <br />
    <label class="MTS-CSS-label-variant-04">Description:</label><br />
    <label>@TicketRequest.Description</label>


    &nbsp;

    <br />
    <br />
    <label class="MTS-CSS-label-variant-04">
        New Comment
        <button class="MTS-CSS-iconButton" @onclick="@NewCommentClick"><span style="color: rgb(0, 167, 157)"> <i class="fas fa-plus-circle" style="font-size: 14px;" /> </span></button>
    </label>
    <div class="MTS-CSS-scrollableTable">
        <table class="table MTS-CSS-table">
            <thead class="MTS-CSS-tableHead">

                <tr class="table-row">

                    <th class="text-white MTS-CSS-tableVerticalBorder p-2">ID</th>
                    @*<th class="text-white p-2">Created By</th>*@
                    <th class="text-white p-2">Name</th>
                    <th class="text-white p-2">Date Created</th>
                    <th class="text-white p-2">Comment</th>
                    <th></th>



                </tr>
            </thead>
            <tbody>
                @if (comments != null)
                {

                    @foreach (var comment in comments)
                    {
                        <tr class="MTS-CSS-tableRow">
                            <td>@comment.Id</td>
                            @*<td>@comment.CreatedBy</td>*@
                            <td>@comment.CreatedByName</td>
                            <td>@comment.DateCreated</td>
                            <td>@comment.Comment</td>
                            <td><button class="MTS-CSS-iconButton" style="float:right; margin:5px" @onclick="()=>UpdateCommentClick(comment.Id)"><span style="color: rgb(60, 90, 108)"> <i class="far fa-edit" style="font-size: 14px;" /> </span>Update</button></td>


                        </tr>
                    }
                                    }
            </tbody>
        </table>
    </div>
</EditForm>





